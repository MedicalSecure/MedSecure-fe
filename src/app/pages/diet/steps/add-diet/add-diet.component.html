<div class="card-body">
  <form [formGroup]="DietForm" style="margin-top: 5%;" class="form-container">
    <div class="row">
      <div class="col-md-6 col-lg-4 mb-3">
        <h4 class="card-title" style="margin-top: 15px">
          Add New Meal
        </h4>
        <div formArrayName="meals">
          <div *ngFor="let meal of DietForm.controls.meals.controls; let mealIndex = index">
            <div class="question" [formGroupName]="mealIndex" style="width: 120%;">
              <div style="display: flex; align-items: center;">
                <div *ngFor="let type of MealType" style="margin-right: 5%;">
                  <label style="display: flex; align-items: center;">
                    <input class="form-check-input" type="radio"
                      [name]="'mealType_' + mealIndex" style="margin-right: 2%;"
                      [id]="'mealType_' + mealIndex + '_' + type" [value]="type"
                      (change)="onMealTypeChange($event, mealIndex)"
                      [checked]="DietForm.controls.meals.at(mealIndex).value.type === type" required />
                    {{ type }}
                  </label>
                </div>
              </div>
              <div formArrayName="foods" class="answers">
                <div *ngFor="let food of meal.controls.foods.controls; let FoodIndex = index">
                  <label>Select Option:</label>
                  <div class="d-flex flex-wrap">
                    <div class="form-check form-check-inline" *ngFor="let option of FoodOptions; let i = index">
                      <input class="form-check-input" type="radio"
                        [name]="'radioOptions_' + mealIndex + '_' + FoodIndex"
                        [id]="'radioOption_' + mealIndex + '_' + i" [value]="option"
                        (change)="onOptionChange(option)" required
                        style="margin-left: 10%; background-color: transparent;" />
                      <label class="form-check-label" [for]="'radioOption_' + mealIndex + '_' + i">{{ option }}</label>
                    </div>
                  </div>
                  <div class="invalid-feedback">
                    Please select a Food.
                  </div>
                  <!-- Dropdown Menu -->
                  <label for="foodSelect" style="margin-right: 10px; margin-bottom: 3%;">Choose Food</label>
                  <div style="display: flex; align-items: center;">
                    <select class="form-control" id="foodSelect" formControlName="foodOption" required style="width: 90%; margin-right: 10px;">
                      <option *ngFor="let food of FoodList" [value]="food">{{ food }}</option>
                    </select>
                    <div class="invalid-feedback" style="margin-right: 10px; margin-bottom: 3%;">
                      Please select a food.
                    </div>
                    <div class="icon-button" (click)="removeFood(mealIndex, FoodIndex)" style="background-color: transparent; margin-left: 1%; border-color: transparent; cursor: pointer;">
                      <i class="fas fa-trash"></i>
                    </div>
                  </div>
                </div>
                <button type="button" class="btn btn-primary" (click)="addFood(mealIndex)" style="margin-top: 5%; color: white;">
                  Add Food
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="add-question">
          <button type="button" style="color: white;" class="btn btn-primary" (click)="addMeal()">Add meal</button>
        </div>
      </div>
    </div>
  </form>
</div>
