<div class="col-lg-12">
  <div
    class="d-flex justify-content-between align-items-center"
  >
    <h4 class="card-title card-title-dash">Todo list</h4>
    <div class="add-items d-flex mb-0">
      <button
        class="add btn btn-icons btn-rounded btn-primary todo-list-add-btn text-white me-0 pl-12p"
        (click)="toggleTextarea()"
      >
        <i class="mdi mdi-plus"></i>
      </button>

    </div>

  </div>
  <div *ngIf="showTextarea">
    <form [formGroup]="taskForm" (ngSubmit)="addTask()">
      <textarea
        class="form-control mt-3"
        rows="3"
        formControlName="content"
        name="taskContent"
        placeholder="new task"
        style="height: 100px; "
        required
      ></textarea>
      <button type="submit"class="btn btn-primary text-white align-items-center">Add Task</button>
    </form>
  </div>
  <div class="list-wrapper">
    @for(task of tasks; track  task){

      <ul class="todo-list todo-list-rounded">
        <li class="d-block">
          <div class="form-check w-100">
            <label class="form-check-label">
              <input class="checkbox" type="checkbox" />
              {{ task.content }}
              <i class="input-helper rounded"></i>
            </label>
            <div class="d-flex mt-2">
              <div class="ps-4 text-small me-3">
                  {{ task.taskAction=== 1 ? 'done' : (task.taskAction === 2 ? 'blocked' : 'close' ) }}

              </div>
              <div
              [ngClass]="{
                'badge badge-opacity-danger me-3': task.taskState === 1,
                'badge badge-opacity-warning me-3 ': task.taskState === 2,
                'badge badge-opacity-success me-3':task.taskState === 3
              }"
              >
                {{ task.taskState === 1 ? 'pending' : (task.taskState === 2 ? 'onProgress' : 'completed' ) }}
              </div>
              <i class="mdi mdi-flag ms-2 flag-color"></i>
            </div>
          </div>
        </li>

      </ul>
    }

  </div>
</div>
